.tab {
  user-select: none;
  position: relative;
  display: flex;
  align-items: stretch;
  height: var(--block-height);
  background: var(--color-two);
  color: var(--color-three);
  margin: 0 0 var(--lesser-padding) 0;
  padding: var(--greater-padding);
  // border-radius: var(--lesser-padding);
  --moved-offset: 0px;
  --filter-offset: 0px;
  --deleted-offset: 0px;
  --y-offset: 0px;
  --delay: 0;
  --trans-delay: 0ms;
  --opacity-delay: 0ms;
  --trans-duration: 0ms;
  --opacity-duration: 0ms;
  --opacity: 1;
  --x-pos: 0;
  --y-pos: 0;
  // --scale: 0.99;
  --scale: 0.99;
  visibility: visible;
  touch-action: none;
  stroke: transparent;
  // transition: stroke 200ms ease-out, background-color 200ms ease-in-out;
  // transition: none;
  // content-visibility: auto;
  // animation: 5000ms ease-in-out banana;
  font-family: 'Open Sans', sans-serif;
  z-index: 0;

  &:hover {
    // background: transparent;
    // color: var(--color-three-hover);
    transition: transform 60ms ease-out, opacity 200ms ease-in-out, box-shadow 200ms ease-in-out, stroke 200ms ease-out;

    & .tab__tab-button {
      &::after {
        content: "";
        opacity: 1;
        transition: opacity 100ms ease-in;
      }
    }
  }

  &--filtered-out {
    visibility: hidden;
    opacity: 0;
    transition: opacity var(--opacity-duration) var(--opacity-delay) ease-in-out, transform var(--trans-duration) var(--trans-delay) ease-in-out, visibility var(--opacity-duration) var(--opacity-delay);
    transform: translateY(var(--y-offset));

    &:hover {
      transition: opacity var(--opacity-duration) var(--opacity-delay) ease-in-out, transform var(--trans-duration) var(--trans-delay) ease-in-out, visibility var(--opacity-duration) var(--opacity-delay);
    }
  }

  &--filtered {
    opacity: 1;
    transform: translateY(var(--y-offset));
    transition: transform var(--trans-duration) var(--trans-delay) ease-in-out, opacity var(--opacity-duration) var(--opacity-delay) ease-in-out, stroke 200ms ease-out;


    &:hover {
      transition: transform var(--trans-duration) var(--trans-delay) ease-in-out, opacity var(--opacity-duration) var(--opacity-delay) ease-in-out, stroke 200ms ease-out;
    }

  }

  &--active {

    overflow: visible;

    &::before {
      content: "";
      width: 2rem;
      position: absolute;
      right: calc(100% + 3px);
      // right: 100%;
      // border-radius: 0 var(--lesser-padding) var(--lesser-padding) 0;
      top: 0;
      height: 100%;
      // background: orange;
      background: lime;
    }

  }

  &__tab-button {
    top: 0;
    left: 0;
    position: absolute;
    overflow: hidden;
    width: 100%;
    height: 100%;
    // z-index: 1;
    background: transparent;
    touch-action: none;
    transition: box-shadow 100ms ease-in-out;
    // box-shadow: inset 0 0 0 2px yellow;

    &:focus {
      // box-shadow: inset 0 0 0 2px lime, 0 0 0 2px var(--color-one);
      box-shadow: inset 0 0 0 2px lime;
      transition: box-shadow 100ms ease-in-out;
    }

    &::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 68rem;
      height: 68rem;
      z-index: -1;
      opacity: 0;
      background: radial-gradient(circle at center, var(--color-two-hover), transparent 50%);
      transform: translate(calc(var(--x-pos) - 50%), calc(var(--y-pos) - 50%));
      // transition: none;
      transition: opacity 100ms ease-out;
    }
  }

  &__checkbox-label {
    position: relative;
    z-index: 1;
    width: 1rem;
    height: 1rem;
    margin-right: var(--greater-padding);
  }

  &__checkbox {
    position: absolute;
    width: 1rem;
    height: 1rem;
    opacity: 0;

    &:focus+svg {
      box-shadow: inset 0 0 0 2px lime;
    }

    &:checked+svg .tab__svg-checkbox-box {
      fill: var(--color-four);
    }

    &:checked+svg .tab__svg-checkbox-checkmark {
      stroke: var(--color-two);
    }
  }

  &__svg-checkbox {
    position: absolute;
    pointer-events: none;
    // border-radius: var(--lesser-padding);
    top: -0.2rem;
    left: -0.2rem;
    transition: box-shadow 20ms ease-in-out;

    &-box {
      fill: transparent;
      transition: fill 20ms ease-in-out;
    }

    &-checkmark {
      stroke: transparent;
      transition: stroke 20ms ease-in-out;
    }
  }

  &__favicon {
    // z-index: 3;
    border: none;
    width: 20px;
    height: 20px;
    margin-right: var(--greater-padding);
  }

  &__title {
    pointer-events: none;
    user-select: none;
    // z-index: 2;
    position: relative;
    margin: 0 var(--greater-padding) 0 0;
    flex: 1 0 0;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }

  &__delete-button {
    position: relative;
    z-index: 1;
    width: 1rem;
    height: 1rem;
    // border-radius: var(--lesser-padding);
    background: transparent;

    &::before {
      content: "";
      position: absolute;
      width: 140%;
      height: 140%;
      top: -0.2rem;
      left: -0.2rem;
      // border-radius: var(--lesser-padding);
      z-index: -1;
      pointer-events: none;
      transition: background-color 120ms ease-in-out;
    }

    &:focus {
      box-shadow: none;

      &::before {
        box-shadow: inset 0 0 0 2px lime;
        transition: box-shadow 120ms ease-in-out;
      }

    }

    &:hover {
      &::before {
        background: var(--color-two-pressed);
      }
    }

    & img {
      pointer-events: none;
    }

    &:active {
      transform: scale(0.96);
      transition: transform 20ms ease-in-out;
    }
  }

  &--held-down {
    position: relative;
    transform: translateY(var(--y-offset)) scale(0.99);
    background: transparent;
    transition: background-color 300ms ease-out, transform 300ms ease-out, opacity 300ms ease-out;

    &:hover {
      background: transparent;
      transition: transform 300ms ease-in-out, opacity 300ms ease-out;

      & .tab__tab-button {
        &::after {
          content: "";
          background: transparent;
          transition: none;
        }
      }

    }

    & .tab__tab-button {

      &::before {
        content: "";
        position: absolute;
        width: 680rem;
        height: 680rem;
        top: 0;
        left: 0;
        z-index: -1;
        transform: translate(calc(var(--x-pos) - 50%), calc(var(--y-pos) - 50%)) scale(0.1);
        transition: none;
        background: radial-gradient(circle at center, transparent 0.5%, var(--color-two) 1% 100%);
        animation: 300ms ease-in forwards heldDown;
      }

      &::after {
        content: "";
        background: transparent;
        transition: none;
      }
    }

  }

  &--draggable {
    animation: 50ms ease-in-out forwards draggable;
    cursor: grabbing;
    background: transparent;
    transform: translateY(var(--y-offset));
    transition: none;
    box-shadow: none;

    &:hover {
      // transition: none;
      // background: transparent;

      & .tab__tab-button {
        &::after {
          content: "";
          background: transparent;
        }
      }
    }

    & .tab__tab-button {
      cursor: grabbing;
      z-index: -1;
      backdrop-filter: blur(6px);

      &:focus {
        box-shadow: inset 0 0 0 2px lime;
        transition: box-shadow 100ms ease-in-out;
      }

      &::after {
        z-index: -100;
        content: "";
        position: absolute;
        transform: none;
        background: transparent;
      }
    }

  }

  &--banana {
    // pointer-events: none;
    // opacity: var(--opacity);
    // opacity: 0.5;
    background: purple;
    // transform: translateY(var(--y-offset)) scale(0.97);
    // transform: translateY(var(--y-offset));
    animation: 2000ms ease-in forwards moving;
    // transition: transform 4000ms ease-in-out;
    // z-index: -10;
  }

  &--peach {
    // background: purple;
    // background: rgba(52, 72, 111, 0.5);
    // transition: none;
    // transition: transform 4000ms ease-in-out;
    // transform: translateY(var(--y-offset));
    animation: 2000ms ease-in forwards moving;
  }

  &--moving {
    opacity: var(--opacity);
    background: var(--color-two-hover);
    transform: translateY(var(--y-offset)) scale(var(--scale));
    transition: transform 50ms ease-in-out, opacity 50ms ease-in-out, background-color 50ms ease-in-out;
    z-index: -1000;
  }

  &__duplicate-indicator {
    margin-right: var(--greater-padding);
    stroke: var(--color-three);
    opacity: 0;
    transition: opacity 200ms ease-out;
  }

  &--duplicate {
    & .tab__duplicate-indicator {
      opacity: 1;
      transition: opacity 200ms ease-out;
    }
  }

  &--deleted {
    opacity: 0;
    transition: opacity 100ms ease-out;

    &:hover {
      opacity: 0;
      transition: opacity 100ms ease-out;
    }

    &~li {
      animation: var(--below-deleted-animation-duration) 100ms ease-in-out forwards belowDeleted;
    }
  }
}

@keyframes belowDeleted {
  from {
    transform: translateY(var(--y-offset));
  }

  to {
    // transform: translateY(calc(var(--y-offset) - var(--block-height) - var(--lesser-padding)));
    transform: translateY(calc(var(--y-offset) + var(--deleted-offset)));
  }
}

@keyframes draggable {
  from {
    transform: translateY(var(--y-offset)) scale(0.99)
  }

  to {
    transform: translateY(var(--y-offset)) scale(1.01)
  }
}

@keyframes moving {

  from {
    transform: translateY(var(--y-offset));
  }

  to {
    transform: translateY(calc(var(--y-offset) + var(--moved-offset)));
  }
}

@keyframes heldDown {
  from {
    transform: translate(calc(var(--x-pos) - 50%), calc(var(--y-pos) - 50%)) scale(0.1);
  }

  to {
    transform: translate(calc(var(--x-pos) - 50%), calc(var(--y-pos) - 50%)) scale(15);
  }
}

@keyframes filteredIn {

  0% {
    transform: translateY(var(--y-offset));
  }

  100% {
    transform: translateY(0);
  }

}